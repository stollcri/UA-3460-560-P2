<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>mapped-file-simple-stream</title><link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Class</b></td><td align="left" bgcolor="#00FFFF"><b>Package: excl</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/classes/excl/mapped-file-simple-stream.htm">8.1 version</a></td></tr></table><h2 id="2">mapped-file-simple-stream</h2>

<p id="3">
This <a href="simple-stream.htm"><code>simple-stream</code></a> subclass
is a subclass of both <a href="file-simple-stream.htm"><code>file-simple-stream</code></a> and <a href="direct-simple-stream.htm"><code>direct-simple-stream</code></a>. Similar to
<a href="file-simple-stream.htm"><code>file-simple-stream</code></a> but
opening a mapped file allows for much faster access to the file, with
much less kernel overhead. Note: most operating systems do not allow
the automatic extension of mapped files, so this class does not allow
the extending operation either. Writes beyond the end of the file may
cause an error.
</p>
<p id="4">
A mapped file must be opened with <b><code>:mapped t</code></b>
specified to <a href="../../../ansicl/dictentr/open.htm"><b>open</b></a>. The <b><i>direction</i></b>
argument to <a href="../../../ansicl/dictentr/open.htm"><b>open</b></a> should be
<code>:input</code> or <code>:io</code>. The file should
have permissions consistent with the value specified
to <i>direction</i>: if <code>:input</code> is
specified, the file must be readable; if <code>:io</code> is
specified, it must be both readable and writable.
</p>
<p id="5">
After a <a href="mapped-file-simple-stream.htm"><code>mapped-file-simple-stream</code></a> is opened, the
<code>excl::buffer</code> slot contains an aligned pointer (see
the section <a href="../../ftype.htm#aligned-pointers-1">Aligned
pointers</a> in <a href="../../ftype.htm">ftype.htm</a>). This value can
be used with any accessors that support aligned pointers,
e.g. <a href="../../operators/ff/fslot-value-typed.htm"><b>fslot-value-typed</b></a> with
an <code>:aligned</code> allocation.
</p>
<p id="6">
The options when creating an instance of this class are:
</p>
<ul>
<li id="7">

<b><i>filename</i></b> (required)

</li>
<li id="8">

<b><i>direction</i></b> (defaults to :input)

</li>
<li id="9">

<b><i>if-exists</i></b>

</li>
<li id="10">

<b><i>if-does-not-exist</i></b>

</li>
<li id="11">

<b><i>external-format</i></b> (defaults to :default)

</li>
<li id="12">

<b><i>input-handle</i></b>

</li>
<li id="13">

<b><i>output-handle</i></b>

</li>
<li id="14">

<b><i>mapped</i></b>

</li>

<li id="15">

<b><i>length</i></b> (the length of the mapping)

</li>
<li id="16">

<b><i>offset</i></b> (the number of bytes beyond the
start of the file where the mapping begins)

</li>

<li id="17">

<b><i>fn-in</i></b> (another name for the input-handle,
for compatibility only, do not specify both)

</li>
<li id="18">

<i>fn-out</i> (another name
for the output handle, for compatibility
only, do not specify both)

</li>
</ul>

<p id="19">
See <a href="../../operators/excl/device-open.htm"><b>device-open</b></a> for a
description of the <i>input-handle</i>,
<i>output-handle</i>, and <i>mapped</i>
options.
</p>

<p id="20">
For the <i>offset</i> and <i>length</i>
arguments, no attempt is made to validate their values; they are
passed to the underlying mapping implementation.  Generally these
arguments have some alignment requirements, but the specific
requirements are up to the individual operating
system. The <i>offset</i> argument is checked for
alignment to at least natural-word alignment. This ensures that the
final value for the buffer slot remains an aligned pointer.
</p>

<p id="21">
See <a href="../../streams.htm">streams.htm</a> for general information on
simple-streams in Allegro CL.
</p>

<hr><p id="22"><small>Copyright (c) 1998-2010, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br><small>Documentation for Allegro CL version 8.2. This page was not revised from the 8.1 page.</small><br>
<small>Created 2010.1.21.</small>
<br></p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/classes/excl/mapped-file-simple-stream.htm">8.1 version</a></td></tr></table></body></html>