<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>on-change-test</title><link rel="stylesheet" href="../../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Generic Function</b></td><td align="left" bgcolor="#00FFFF"><b>Package: cg</b></td><td align="center" bgcolor="#00FFFF"><a href="../../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/cg/o/on-change-test.htm">8.1 version</a></td></tr></table><h2 id="2">on-change-test</h2>

<p id="3"><b>Arguments: </b><i>
dialog-item
</i></p>

<p id="4">
Returns the value of the <a href="../o/on-change-test.htm"><b>on-change-test</b></a> event property of
<i>dialog-item</i>. The value of the <a href="../o/on-change-test.htm"><b>on-change-test</b></a> property should be a
function object or a function name (a symbol naming a function), or
<code>nil</code>.  This function is called to determine
whether an apparent change in the value of
<i>dialog-item</i> should trigger a call to the <a href="../o/on-change.htm"><b>on-change</b></a> function. If no
function is supplied (that is, <a href="../o/on-change-test.htm"><b>on-change-test</b></a> is <code>nil</code>), then no values are ever considered equivalent.
(That can be useful for ensuring that the <a href="../o/on-change.htm"><b>on-change</b></a> function is always
called, even when the <a href="../v/value.htm"><b>value</b></a> is
set to its current value. See the note about eq value below.)
</p>
<p id="5">
The function (if any) should take two arguments, the old value and the
new value.
</p>
<p id="6">
The function should return <code>nil</code> if the values
are different (returning <code>nil</code> is the
definition of the values being different) and return
true if the values are the same. 
</p>
<p id="7">
The initial value (for all widgets) is the function name <a href="../w/widget-value-equal.htm"><b>widget-value-equal</b></a>.  When
the two values being compared are both strings, then this function
returns the result of calling <a href="../../../../ansicl/dictentr/stringst.htm"><b>string=</b></a> on the two values; otherwise the result
of calling <a href="../../../../ansicl/dictentr/eql.htm"><b>eql</b></a> on the values
is returned. This special function is provided in order to match
string values properly (so strings with identical characters will be
considered the same), but without inefficiently recursing into deep
trees or other complex widget values needlessly, as <a href="../../../../ansicl/dictentr/equal.htm"><b>equal</b></a> (which does consider strings with
identical characters the same) might do.
</p>
<p id="8">
The <a href="../o/on-change-test.htm"><b>on-change-test</b></a> is also used
internally to find values in some kinds of controls. For example, when
the <a href="../v/value.htm"><b>value</b></a> of an
item-list control is set, the <a href="../r/range.htm"><b>range</b></a> of values is searched for the
new value, using the <a href="../o/on-change-test.htm"><b>on-change-test</b></a> to test which
range value is equivalent to the new value so that it may be selected.
</p>

<p id="9">
See <a href="../../../cg/cg-events.htm">cg-events.htm</a> for information about
event handling in Common Graphics.
</p>

<h3 id="10">
A note about eq value: why you might want the on-change-test function to always return nil
</h3>

<p id="11">
Suppose the value of a widget has contents subject to modification,
such as a list. If you modify the elements of the list but do not
create a new list, the old and new value will be <a href="../../../../ansicl/dictentr/eq.htm"><b>eq</b></a> and the default <a href="../o/on-change-test.htm"><b>on-change-test</b></a> function will see the old and new
value as the same, behavior which you presumably do not want. In that
case, <code>nil</code> is the appropriate value for the
<a href="../o/on-change-test.htm"><b>on-change-test</b></a>: some
efficiency is lost because the widget is always updated but no
intended change is missed.
</p>

<hr><p id="12"><small>Copyright (c) 1998-2010, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br><small>Documentation for Allegro CL version 8.2. This page was not revised from the 8.1 page.</small><br>
<small>Created 2010.1.21.</small>
<br></p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/cg/o/on-change-test.htm">8.1 version</a></td></tr></table></body></html>