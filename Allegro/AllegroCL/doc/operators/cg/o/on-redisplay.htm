<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>on-redisplay</title><link rel="stylesheet" href="../../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Generic Function</b></td><td align="left" bgcolor="#00FFFF"><b>Package: cg</b></td><td align="center" bgcolor="#00FFFF"><a href="../../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/cg/o/on-redisplay.htm">8.1 version</a></td></tr></table><h2 id="2">on-redisplay</h2>

<p id="3"><b>Arguments: </b><i>
drawable
</i></p>

<p id="4">
Returns (or sets with <a href="../../../../ansicl/dictentr/setfpset.htm"><b>setf</b></a>)
the value of the <a href="../o/on-redisplay.htm"><b>on-redisplay</b></a> event property of the
argument. The value should be a function object or a function name (a
symbol naming a function). This function will be called by the default
<a href="../r/redisplay-event.htm"><b>redisplay-event</b></a>
method whenever a <a href="../../../classes/cg/drawable.htm"><code>drawable</code></a> needs to be redrawn, such
as when it is uncovered. Note that if the default <a href="../r/redisplay-event.htm"><b>redisplay-event</b></a> method is
overridden, then the <a href="../o/on-redisplay.htm"><b>on-redisplay</b></a> will not be called by
it. If the value of the <a href="../o/on-redisplay.htm"><b>on-redisplay</b></a> property is <code>nil</code>, then no function is called.
</p>
<p id="5">
The <a href="../o/on-redisplay.htm"><b>on-redisplay</b></a>
function should take two arguments, (1) the drawable control and (2)
the stream to draw on. If the <a href="../u/use-bitmap-stream.htm"><b>use-bitmap-stream</b></a> property of the
control is true, then the stream argument will be the bitmap-stream of
the control; otherwise it will be the visible window of the
control. The <a href="../o/on-redisplay.htm"><b>on-redisplay</b></a> function should draw
whatever it draws on the stream object; if this is a bitmap-stream,
then the drawable will automatically quickly copy what was drawn there
to the visible window.
</p>
<p id="6">
Here is the sample <a href="../o/on-redisplay.htm"><b>on-redisplay</b></a> function that is used
initially by a drawable control when it is interactively instantiated
onto a form in the IDE. This should of course be replaced by some
other function more appropriate to the application. Note that it draws
its drawing to fit the current page size of the drawable.
</p>
<pre id="7">
(defun on-redisplay-example (drawable stream)
   (declare (ignore drawable))
   (let* ((width (page-width stream))
          (height (page-height stream))
          (mid (floor width 2))
          (num-lines 24)
          (factor (float (/ width (1- num-lines))))
          )
      (dotimes (j num-lines)
         (draw-line stream
           (nmake-position #.(make-position 0 0) mid height)
           (nmake-position #.(make-position 0 0)
             (round (* j factor)) 0)))))
</pre>
<p id="8">
<a href="../o/on-redisplay.htm"><b>on-redisplay</b></a> is a
property of the <a href="../../../classes/cg/drawable.htm"><code>drawable</code></a> class.
</p>


<p id="9">
See <a href="../../../cg/cg-events.htm">cg-events.htm</a> for information about
event handling in Common Graphics.
</p>


<hr><p id="10"><small>Copyright (c) 1998-2010, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br><small>Documentation for Allegro CL version 8.2. This page was not revised from the 8.1 page.</small><br>
<small>Created 2010.1.21.</small>
<br></p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/cg/o/on-redisplay.htm">8.1 version</a></td></tr></table></body></html>