<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>getenv</title><link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Function</b></td><td align="left" bgcolor="#00FFFF"><b>Package: system</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/system/getenv.htm">8.1 version</a></td></tr></table><h2 id="2">getenv</h2>

<p id="3"><b>Arguments: </b><i>string</i></p>

<p id="4">
The new <code>:osi</code> module, released after the release of
Allegro CL 6.2, has additional functionality relating to environment
variables, including <a href="../../os-interface.htm#setenv-op-bookmarkxx"><b>setenv</b></a> and <a href="../../os-interface.htm#unsetenv-op-bookmarkxx"><b>unsetenv</b></a>. See
<a href="../../os-interface.htm#osi-misc-low-2">OSI miscellaneous
low-level functionality</a> in
<a href="../../os-interface.htm">os-interface.htm</a>. The symbol
<code>system:getenv</code> is exported from the new
<code>excl.osi</code> package (as well as from the
<code>system</code> package).
</p>

<p id="5">
This function returns the value (a string) of an environment
variable (such as TERM, SHELL, and DISPLAY). If the environment
variable is not defined, nil is returned. This function may be used
with <strong>setf</strong> to set an environment variable. For
example:
</p>

<pre id="6">
;; The current values of the environment variable on your system may, 
;; of course, be different from what appears in this example. 
user(2): (sys:getenv "SHELL")
"/bin/csh" 
user(3): (setf (sys:getenv "SHELL") "/bin/sh") 
"/bin/sh" 
user(4): (sys:getenv "SHELL") 
"/bin/sh"
</pre>

<p id="7"><strong>Warning</strong>: When you use setf with sys:getenv to set
an environment variable, the string specifying the new value is stored
in malloc'ed space and that space cannot be freed (in any practical
way). This creates a small memory leak in the system, but it should
only be significant if you set many, many environment variables.</p>

<p id="8">Note that there is no pre-defined, programmatic way to unset an
environment variable from within Lisp. It is an error to setf
<strong>sys:getenv</strong> to anything other than a string and the
effect of doing so is undefined (an error is typically not signaled
but the behavior is likely not what is intended). Specifically. </p>

<pre id="9">
(setf (sys:getenv "VAR") nil) 
</pre>

<p id="10">does not unset VAR in the environment.</p>

<p id="11">See <a href="../../os-interface.htm">os-interface.htm</a>.</p>


<hr><p id="12"><small>Copyright (c) 1998-2010, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br><small>Documentation for Allegro CL version 8.2. This page was not revised from the 8.1 page.</small><br>
<small>Created 2010.1.21.</small>
<br></p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/system/getenv.htm">8.1 version</a></td></tr></table></body></html>