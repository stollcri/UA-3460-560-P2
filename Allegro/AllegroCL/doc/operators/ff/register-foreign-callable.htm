<html><head><meta http-equiv="content-type" name="description" content="text/html; charset=UTF-8"> <title>register-foreign-callable</title><link rel="stylesheet" href="../../acldoc-styles.css" type="text/css"></head><body><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"><b>Function</b></td><td align="left" bgcolor="#00FFFF"><b>Package: ff</b></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/ff/register-foreign-callable.htm">8.1 version</a></td></tr></table><h2 id="2">register-foreign-callable</h2>

<p id="3"><b>Arguments: </b><i>
name </i> &amp;optional <i>index-or-reuse convert-to-c-types</i><i>
</i></p>

<p id="4">
The <b><i>name</i></b> argument must be a symbol defined
with <a href="defun-foreign-callable.htm"><b>defun-foreign-callable</b></a>.
</p>

<p id="5">
The <b><i>index-or-reuse</i></b> argument can be a
fixnum to select a specific table entry to replace, or the symbol
<code>:reuse</code> to specify that if a function with the same
name is already registered, the function will be replaced at the same
index.
</p>

<p id="6">
If <b><i>convert-to-c-types</i></b> is specified, then
an attempt will be made to convert the return value to a foreign
value, otherwise the return value is returned unchanged. It is
important to note that though the default is <code>nil</code>, most often the desired effect is obtained by
setting this option to <code>t</code>. The default of
<code>nil</code> is retained for compatibility
reasons. This is described in a little more detail in the description
of <a href="defun-foreign-callable.htm"><b>defun-foreign-callable</b></a>.
</p>

<p id="7">
This function returns 5 values:
</p>

<ul>


<li id="8">

an integer address which can be passed to C and used as the address of
the function. This address is valid even after a gc and after a
<a href="../excl/dumplisp.htm"><b>dumplisp</b></a> and so is always be
valid; see <a href="../../foreign-functions.htm#calling-lisp-from-c-2">Calling Lisp functions from C:
lisp_call_address() and lisp_call()</a> in
<a href="../../foreign-functions.htm">foreign-functions.htm</a> for further information.

</li>

<li id="9">
a table-index value
</li>
<li id="10">
the previous table entry
</li>
<li id="11">
a fixnum representing the calling convention
</li>
<li id="12">
the number of bytes of stack space needed for this function's arguments
</li>
</ul>

<p id="13">
In versions using the <strong>:os-threads</strong> model of
multiprocessing, the callback from foreign code to the
foreign-callable function <i>name</i> may be made from a
thread started outside Lisp. This is not supported in a version of
Lisp using the non <strong>:os-threads</strong> model of
multiprocessing. trying it will likely cause Lisp to fail. See
<a href="../../foreign-functions.htm#ff-and-multiprocessing-2">Foreign functions and
multiprocessing</a> in <a href="../../foreign-functions.htm">foreign-functions.htm</a>.
</p>

<p id="14">
See <a href="../../ftype.htm">ftype.htm</a> for
information on foreign types in Allegro CL and
<a href="../../foreign-functions.htm">foreign-functions.htm</a> for general
information on foreign functions in Allegro CL.
</p>

<hr><p id="15"><small>Copyright (c) 1998-2010, Franz Inc. Oakland, CA., USA. All rights reserved.</small><br><small>Documentation for Allegro CL version 8.2. This page was not revised from the 8.1 page.</small><br>
<small>Created 2010.1.21.</small>
<br></p><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td colspan="2" bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3"><tr><td align="left" bgcolor="#00FFFF"></td><td align="left" bgcolor="#00FFFF"></td><td align="center" bgcolor="#00FFFF"><a href="../../contents.htm"><b>ToC</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../introduction.htm"><b>DocOverview</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../cgide.htm"><b>CGDoc</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../release-notes.htm"><b>RelNotes</b></a></td><td align="center" bgcolor="#00FFFF"><a href="http://www.franz.com/support/faqs/"><b>FAQ</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../index.htm"><b>Index</b></a></td><td align="center" bgcolor="#00FFFF"><a href="../../permuted-index.htm"><b>PermutedIndex</b></a></td></tr></table></td><td align="right"><b>Allegro CL version 8.2</b><br><small><a href="../../introduction.htm#updates-s">Unrevised from 8.1 to 8.2.</a></small><br><a href="http://www.franz.com/support/documentation/8.1/doc/operators/ff/register-foreign-callable.htm">8.1 version</a></td></tr></table></body></html>