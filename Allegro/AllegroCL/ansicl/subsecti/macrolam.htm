<!doctype HTML public "-//W3O//DTD W3 HTML 3.2//EN">
<HTML>
<HEAD>

<!-- 
  Document                : macrolam.htm
  representing node       : Macro Lambda Lists  [ID:NO-254]
                 of class : SubSection  [ID:SC-4]
  Generated by SchemaText : 1.52
  From HSDL source        : ansi cl
  At                      : 09:55:23 23.07.98

  About SchemaText        : http://www.schema.de
-->

<META NAME="GENERATOR" CONTENT="SchemaText 1.40f">
<META NAME="AUTHOR" CONTENT="Franz Inc.">
<META NAME="DATE" CONTENT="23.07.98">
<META NAME="TIME" CONTENT="09:51:09">
<META NAME="VERSION" CONTENT="520">

<TITLE>Macro Lambda Lists</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF">

<table border="0" width="100%" cellpadding="1" cellspacing="0">
  <tr>
    <td bgcolor="#00FFFF"><table border="0" cellpadding="5" cellspacing="3">
      <tr>
        <td align="left" bgcolor="#00FFFF"><a href="../../doc/contents.htm"><b>ToC</b></a></td>
        <td align="left" bgcolor="#00FFFF"><a href="../../doc/introduction.htm"><b>DocOverview</b></a></td>
        <td align="left" bgcolor="#00FFFF"><a href="../../doc/cgide.htm"><b>CGDoc</b></a></td>
        <td align="left" bgcolor="#00FFFF"><a href="../../doc/release-notes.htm"><b>RelNotes</b></a></td>
        <td align="left" bgcolor="#00FFFF"><a href="../../doc/index.htm"><b>Index</b></a></td>
        <td align="left" bgcolor="#00FFFF"><a href="../../doc/permuted-index.htm"><b>PermutedIndex</b></a></td>
      </tr>
    </table>
    </td>
    <td align="right"><b>Allegro CL</b>
    </td>
  </tr>
</table>

<A NAME="SubSection_Macro_Lambda_254"></A>
<FONT FACE="ARIAL,GENEVA,HELVETICA">
<A HREF="../ansicl.htm" TARGET="_self"><IMG SRC="../images/a-top12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Home"></A><IMG SRC="../images/void16.gif" BORDER=0 WIDTH=16 HEIGHT=16>

<A HREF="speciali.htm"><IMG SRC="../images/a-lft12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Previous"></A> 
<A HREF="../section/lambdali.htm" TARGET="_self"><IMG SRC="../images/a-up12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Up"></A> 
<A HREF="../subsubse/destruc1.htm"><IMG SRC="../images/a-rgh12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Next"></A><IMG SRC="../images/void16.gif" BORDER=0 WIDTH=16 HEIGHT=16>
<A HREF="../meta/tableofc.htm" TARGET="_self"><IMG SRC="../images/toc.gif" BORDER=0 WIDTH=16 HEIGHT=16 ALT="Table of Contents"></A><IMG SRC="../images/void16.gif" BORDER=0 WIDTH=16 HEIGHT=16>
<A HREF="../meta/index.htm" TARGET="_self"><IMG SRC="../images/i16.gif" BORDER=0 WIDTH=16 HEIGHT=16 ALT="Index"></A>
<HR NOSHADE>
<TABLE WIDTH="90%"><TR>
<TD WIDTH=5%>&nbsp;</TD>
<TD WIDTH=95%>
<FONT SIZE=-2>
<A HREF="../ansicl.htm"> ANSI Common Lisp</A>&nbsp;&nbsp;<IMG SRC="../images/a-rgh6b.gif" BORDER=0 WIDTH=6 HEIGHT=6>&nbsp;<A HREF="../chapter/evaluati.htm">3 Evaluation and Compilation</A>&nbsp;&nbsp;<IMG SRC="../images/a-rgh6b.gif" BORDER=0 WIDTH=6 HEIGHT=6>&nbsp;<A HREF="../section/lambdali.htm">3.4 Lambda Lists</A>

</FONT>
<H3 ID="2">3.4.4   Macro Lambda Lists</H3>

A <B><I>macro lambda list</I></B> is used in describing <I><A HREF="../glossary/m.htm#macro">macros</A></I> 
defined by the <I><A HREF="../glossary/o.htm#operator">operators</A></I> in the next figure.

<P ID="3">


<P ID="4">
<TABLE WIDTH="100%" BORDER=1 CELLSPACING=0 CELLPADDING=5>
<CAPTION ALIGN=BOTTOM>Operators that use Macro Lambda Lists</CAPTION>

  <tr>
    <td>define-compiler-macro</td>
    <td>defmacro</td>
    <td>macrolet</td>
  </tr>
  <tr>
    <td>define-setf-expander</td>
    <td></td>
    <td></td>
  </tr>
</TABLE>


<P ID="5">
With the additional restriction that
an <I><A HREF="../glossary/e.htm#environmentparameter">environment parameter</A></I> may appear only once
(at any of the positions indicated),
a <I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I> has the following syntax:

<P ID="6">



<TABLE BORDER=0>
<TR><TD>
reqvars::= </TD><TD><TT>{</TT><I>var</I> | 
<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11><I>pattern</I><TT>}</TT><P ID="7"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
optvars::= </TD><TD><TT>[</TT><TT>&amp;optional</TT> <TT>{</TT><I>var</I> | 
(<TT>{</TT><I>var</I> | <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11><I>pattern</I><TT>}</TT> <I>[</I>init-form [supplied-p-parameter <I>]
</I>])<TT>}</TT><SUP>*</SUP><TT>]</TT><P ID="8"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
restvar::= </TD><TD><TT>[</TT><TT>{</TT><TT>&amp;rest</TT> | <TT>&amp;body</TT><TT>}</TT> <TT>]</TT><TT>{</TT><I>var</I> | 
<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11><I>pattern</I><TT>}</TT><P ID="9"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
keyvars::= </TD><TD>[<TT>&amp;key</TT> <TT>{</TT><I>var</I> | 
(<TT>{</TT><I>var</I> | (<I>keyword-name</I><TT>{</TT><I>var</I> | 
<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11><I>pattern</I><TT>}</TT> )<TT>}</TT> 
<I>[</I>init-form [supplied-p-parameter <I>]
</I>])<TT>}</TT><SUP>*</SUP></TD></TR>
<TR><TD></TD><TD><cl_xbrac>[<TT>&amp;allow-other-keys</TT>]]<P ID="10"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
auxvars::= </TD><TD><TT>[</TT><TT>&amp;aux</TT> <TT>{</TT><I>var</I> | (<I>var</I> <I>[</I><I>init-form</I> <I>]
</I>)<TT>}</TT><SUP>*</SUP><TT>]</TT><P ID="11"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
envvar::= </TD><TD><TT>[</TT><TT>&amp;environment</TT> <I>var</I><TT>]</TT><P ID="12"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
wholevar::= </TD><TD><TT>[</TT><TT>&amp;whole</TT> <I>var</I><TT>]</TT><P ID="13"></TD></TR>
</TABLE>
<TABLE BORDER=0>
<TR><TD>
lambda-list::= </TD><TD>(<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>wholevar <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar
 <cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>reqvars  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar
 <cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>optvars  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar</TD></TR>
<TR><TD></TD><TD><cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>restvar  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar
 <cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>keyvars  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar
 <cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>auxvars  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar)&nbsp;|</TD></TR>
<TR><TD></TD><TD>(<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>wholevar <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar
 <cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>reqvars  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar
 <cl_xparen><IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>optvars  <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>envvar <TT>.</TT>
 <cl_xparen><I>var</I>)<P ID="14"></TD></TR></TABLE>
<TABLE BORDER=0>
<TR><TD>
pattern::= </TD>
<TD>(<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>wholevar<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>reqvars<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>optvars<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>restvar<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>keyvars<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>auxvars) |</TD></TR>
<TR><TD></TD><TD>(<IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>wholevar <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>reqvars <IMG SRC="../images/downarr.gif" BORDER=0 WIDTH=13 HEIGHT=11>optvars <TT>.</TT>
<I>var</I>)</TD></TR><P ID="15">
</TABLE>



<P ID="16">
A <I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I> can contain
the <I><A HREF="../glossary/l.htm#lambdalistkeyword">lambda list keywords</A></I> shown in the next figure.

<P ID="17">
<P ID="18">
<TABLE WIDTH="100%" BORDER=1 CELLSPACING=0 CELLPADDING=5>
<CAPTION ALIGN=BOTTOM>Lambda List Keywords used by Macro Lambda Lists</CAPTION>

  <tr>
    <td><A HREF="../subsubsu/suppress.htm"><B>&amp;allow-other-keys</B></A></td>
    <td><A HREF="#SubSection_Macro_Lambda_254"><B>&amp;environment</B></A></td>
    <td><A HREF="../subsubse/aspecifi.htm"><B>&amp;rest</B></A></td>
  </tr>
  <tr>
    <td><A HREF="../subsubse/specifie.htm"><B>&amp;aux</B></A></td>
    <td><A HREF="../subsubse/specifi0.htm"><B>&amp;key</B></A></td>
    <td><A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A></td>
  </tr>
  <tr>
    <td><A HREF="#SubSection_Macro_Lambda_254"><B>&amp;body</B></A></td>
    <td><A HREF="../subsubse/specifi1.htm"><B>&amp;optional</B></A></td>
    <td></td>
  </tr>
</TABLE>


<P ID="19">
<I><A HREF="../glossary/o.htm#optionalparameter">Optional parameters</A></I> (introduced by <A HREF="../subsubse/specifi1.htm"><B>&amp;optional</B></A>) and
<I><A HREF="../glossary/k.htm#keywordparameter">keyword parameters</A></I> (introduced by <A HREF="../subsubse/specifi0.htm"><B>&amp;key</B></A>)
can be supplied in a <I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I>,
just as in an <I><A HREF="../glossary/o.htm#ordinarylambdalist">ordinary lambda list</A></I>.
Both may contain default initialization forms and <I><A HREF="../glossary/s.htm#suppliedpparameter">supplied-p parameters</A></I>.

<P ID="20">

<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;body</B></A>
is identical in function to <A HREF="../subsubse/aspecifi.htm"><B>&amp;rest</B></A>,
but it can be used to inform certain output-formatting 
and editing functions that the remainder of the <I><A HREF="../glossary/f.htm#form">form</A></I> is
treated as a body, and should be indented accordingly.
Only one of <A HREF="#SubSection_Macro_Lambda_254"><B>&amp;body</B></A> or <A HREF="../subsubse/aspecifi.htm"><B>&amp;rest</B></A> can be used at any particular level; 
see Section <A HREF="../subsubse/destruc1.htm">3.4.4.1 Destructuring by Lambda Lists</A>.

<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;body</B></A> can appear at any level of a 
<I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I>; 
for details, see Section <A HREF="../subsubse/destruc1.htm">3.4.4.1 Destructuring by Lambda Lists</A>.


<P ID="21">

<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A>
is followed by a single variable that is bound to the
entire macro-call form; this is the value that the <I><A HREF="../glossary/m.htm#macrofunction">macro function</A></I>
receives as its first argument.


If <A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A> and a following variable appear,
they must appear first in <I>lambda-list</I>,

before any other parameter or <I><A HREF="../glossary/l.htm#lambdalistkeyword">lambda list keyword</A></I>.

<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A> can appear at any level of a <I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I>. 
At inner levels, the <A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A> variable is bound to
		the corresponding part of the argument, 
as with <A HREF="../subsubse/aspecifi.htm"><B>&amp;rest</B></A>, but unlike <A HREF="../subsubse/aspecifi.htm"><B>&amp;rest</B></A>, other arguments are also allowed.
The use of <A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A> does not affect the pattern of arguments
     specified.




<P ID="22">

<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;environment</B></A>
is followed by a single variable that is bound
to an <I><A HREF="../glossary/e.htm#environment">environment</A></I> representing the <I><A HREF="../glossary/l.htm#lexicalenvironment">lexical environment</A></I> in which the
macro call is to be interpreted.
This <I><A HREF="../glossary/e.htm#environment">environment</A></I> 



should be used with

<A HREF="../dictentr/macro-fu.htm"><B>macro-function</B></A>,



<A HREF="../dictentr/get-setf.htm"><B>get-setf-expansion</B></A>,








<A HREF="../dictentr/compiler.htm"><B>compiler-macro-function</B></A>, 


and
<A HREF="../dictentr/macroex0.htm"><B>macroexpand</B></A> 
(for example) in computing the expansion of the macro, to ensure that any
<I><A HREF="../glossary/l.htm#lexicalbinding">lexical bindings</A></I> or definitions established in the 
<I><A HREF="../glossary/c.htm#compilationenvironment">compilation environment</A></I> are taken into account.

<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;environment</B></A> can only appear at the top level of a
	<I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I>, and can only
appear once, but can appear anywhere in that list;


the <A HREF="#SubSection_Macro_Lambda_254"><B>&amp;environment</B></A> <I><A HREF="../glossary/p.htm#parameter">parameter</A></I> is <I><A HREF="../glossary/b.htm#bound">bound</A></I> along with <A HREF="#SubSection_Macro_Lambda_254"><B>&amp;whole</B></A>
before any other <I><A HREF="../glossary/v.htm#variable">variables</A></I> in the <I><A HREF="../glossary/l.htm#lambdalist">lambda list</A></I>, regardless of where
<A HREF="#SubSection_Macro_Lambda_254"><B>&amp;environment</B></A> appears in the <I><A HREF="../glossary/l.htm#lambdalist">lambda list</A></I>.


The <I><A HREF="../glossary/o.htm#object">object</A></I> that is bound to the
<I><A HREF="../glossary/e.htm#environmentparameter">environment parameter</A></I> has <I><A HREF="../glossary/d.htm#dynamicextent">dynamic extent</A></I>.



<P ID="23">

Destructuring allows a <I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I> to express
the structure of a macro call syntax.
If no <I><A HREF="../glossary/l.htm#lambdalistkeyword">lambda list keywords</A></I> appear,
then the <I><A HREF="../glossary/m.htm#macrolambdalist">macro lambda list</A></I> is a <I><A HREF="../glossary/t.htm#tree">tree</A></I>
containing parameter names at the leaves.

The pattern and the <I><A HREF="../glossary/m.htm#macroform">macro form</A></I> must have compatible <I><A HREF="../glossary/t.htm#treestructure">tree structure</A></I>; 
that is, their <I><A HREF="../glossary/t.htm#treestructure">tree structure</A></I> must be equivalent,
or it must differ only in that some <I>leaves</I> of the pattern
match <I><A HREF="../glossary/n.htm#nonatomic">non-atomic</A></I> <I><A HREF="../glossary/o.htm#object">objects</A></I> of the <I><A HREF="../glossary/m.htm#macroform">macro form</A></I>.

For information about error detection in this <I><A HREF="../glossary/s.htm#situation">situation</A></I>,
see Section <A HREF="../subsubse/destruc0.htm">3.5.1.7 Destructuring Mismatch</A>.


<P ID="24">




A destructuring <I><A HREF="../glossary/l.htm#lambdalist">lambda list</A></I>
(whether at top level or embedded) 

can
be dotted, ending
in a parameter name.  This situation is treated exactly as if the
parameter name that ends the <I><A HREF="../glossary/l.htm#list">list</A></I> had appeared preceded by <A HREF="../subsubse/aspecifi.htm"><B>&amp;rest</B></A>.

<P ID="25">

It is permissible for a <I><A HREF="../glossary/m.htm#macro">macro</A></I> <I><A HREF="../glossary/f.htm#form">form</A></I> (or a <I><A HREF="../glossary/s.htm#subexpression">subexpression</A></I> of a
<I><A HREF="../glossary/m.htm#macro">macro</A></I> <I><A HREF="../glossary/f.htm#form">form</A></I>)
to be a <I><A HREF="../glossary/d.htm#dottedlist">dotted list</A></I> 
only  when <TT>(... &amp;rest var)</TT> or <TT>(... . var)</TT> is used to match
 it. It is the responsibility of the <I><A HREF="../glossary/m.htm#macro">macro</A></I> to recognize and deal
 with such situations.


<P ID="26"><NOBR>3.4.4.1&nbsp;&nbsp;<A HREF="../subsubse/destruc1.htm" TARGET="_self">Destructuring by Lambda Lists</A><NOBR>
</TD></TR></TABLE>
<HR NOSHADE>
<A HREF="../ansicl.htm" TARGET="_self"><IMG SRC="../images/a-top12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Home"></A><IMG SRC="../images/void16.gif" BORDER=0 WIDTH=16 HEIGHT=16>

<A HREF="speciali.htm"><IMG SRC="../images/a-lft12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Previous"></A> 
<A HREF="../section/lambdali.htm" TARGET="_self"><IMG SRC="../images/a-up12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Up"></A> 
<A HREF="../subsubse/destruc1.htm"><IMG SRC="../images/a-rgh12b.gif" BORDER=0 WIDTH=12 HEIGHT=12 ALT="Next"></A><IMG SRC="../images/void16.gif" BORDER=0 WIDTH=16 HEIGHT=16>
<A HREF="../meta/tableofc.htm" TARGET="_self"><IMG SRC="../images/toc.gif" BORDER=0 WIDTH=16 HEIGHT=16 ALT="Table of Contents"></A><IMG SRC="../images/void16.gif" BORDER=0 WIDTH=16 HEIGHT=16>
<A HREF="../meta/index.htm" TARGET="_self"><IMG SRC="../images/i16.gif" BORDER=0 WIDTH=16 HEIGHT=16 ALT="Index"></A>
<HR NOSHADE>

<SMALL><I><B>&#169; Franz Inc. 1998-2009</b> - File last updated 7-21-2009</I></SMALL>
</FONT>

</BODY>
</HTML>
